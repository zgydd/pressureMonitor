<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta http-equiv="Access-Control-Allow-Method" content="*">
    <title>内部产品培训-智能压力监测垫</title>
    <link rel="stylesheet" href="./css/normalize.min.css">
    <link rel='stylesheet' href='./vender/font-awesome-4.7.0/css/font-awesome.css'>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/main.css">
</head>

<body>
    <div class="ct" id="home">
        <div class="ct" id="use-guide">
            <div class="ct" id="build">
                <div class="ct" id="list">
                    <div class="ct" id="dis-class">
                        <div class="ct" id="dis-worker">
                            <div class="ct" id="dis-algorth">
                                <ul id="menu">
                                    <a href="#home">
                                        <li class="icon fa fa-home"></li>
                                    </a>
                                    <a href="#use-guide">
                                        <li class="icon fa fa-laptop" id="guide"></li>
                                    </a>
                                    <a href="#build">
                                        <li class="icon fa fa-object-group" id="establish"></li>
                                    </a>
                                    <a href="#list">
                                        <li class="icon fa fa-list-alt" id="tree-list"></li>
                                    </a>
                                    <a href="#dis-class">
                                        <li class="icon fa fa-cubes" id="classes"></li>
                                    </a>
                                    <a href="#dis-worker">
                                        <li class="icon fa fa-microchip" id="workers"></li>
                                    </a>
                                    <a href="#dis-algorth">
                                        <li class="icon fa fa-grav" id="algorth"></li>
                                    </a>
                                    <li class="icon fa fa-arrow-left" id="exit" onclick="javascript:window.location.href = '../index.html';"></li>
                                </ul>
                                <div class="page" id="page-home">
                                    <section class="home-main">
                                        <h2>智能压力监测系统软件</h2>
                                        <h3>基于&nbsp;HTML5&nbsp;+&nbsp;CSS3&nbsp;+&nbsp;ECMAScript5.1&nbsp;编写</h3>
                                        <p>读取并分析智能压力监测垫的数据</p>
                                        <p>直观的实时压力图像显示</p>
                                        <p>根据实时压力结合压疮评估表实时评分并计算翻身时间，压疮防护警报</p>
                                        <p>记录垫上行走状况并进行步态分析</p>
                                        <img src="./assets/screen/default_wait.png" />
                                        <img src="./assets/screen/16x16_main.png" />
                                        <img src="./assets/screen/32x80_main.png" />
                                    </section>
                                </div>
                                <div class="page" id="page-guide">
                                    <section class="guide-main">
                                        <h2>应用流程</h2>
                                        <ul>
                                            <p>使用</p>
                                            <li>
                                                正确连接压力垫，确保垫上没有杂物压力（硬件数据可读取时自动校准一次）并打开软件
                                            </li>
                                            <li><img src="./assets/screen/default_wait.png" /></li>
                                            <li>软件自动识别压力垫类型</li>
                                            <li><img src="./assets/screen/1.png" /></li>
                                            <li>正常使用压力垫，倒计时会根据垫上压力情况和评估表自动变化</li>
                                            <li><img src="./assets/screen/2.png" /></li>
                                            <li><img src="./assets/screen/3.png" /></li>
                                            <li><img src="./assets/screen/4.png" /></li>
                                            <li>倒计时结束软件声音警报，翻身/离开之后重置倒计时</li>
                                        </ul>
                                        <ul>
                                            <p>压力性溃疡评估表设置</p>
                                            <li>软件读取指定目录（Windows下为“C:\cfgPresureMonitor\”）下.scle文件获取评估表并将其可视化，根据选定的评估表进行评分倒计时</li>
                                            <li><img src="./assets/screen/5.png" /></li>
                                        </ul>
                                        <ul>
                                            <p>系统设置</p>
                                            <li>软件可以修改显示图像噪点过滤，警报时长和频度</li>
                                            <li><img src="./assets/screen/6.png" /></li>
                                        </ul>
                                        <ul>
                                            <p>步态分析历史记录</p>
                                            <li>软件读取/保存指定目录（Windows下为“C:\cfgPresureMonitor\[时间戳]”）内容并将其可视化显示步态分析历史记录</li>
                                            <li><img src="./assets/screen/recordfile.png" /></li>
                                            <li><img src="./assets/screen/7.png" /></li>
                                            <li>每项记录可以分别回放/分析</li>
                                            <li><img src="./assets/screen/8.png" /></li>
                                            <li><img src="./assets/screen/9.png" /></li>
                                        </ul>
                                        <ul>
                                            <p>步态分析</p>
                                            <li>连接支持步态检测的压力垫后点击“开始步态分析”按钮进入步态分析，点击“结束步态分析”完成</li>
                                            <li><img src="./assets/screen/10.png" /></li>
                                            <li>
                                                <video src="./assets/video/VID_20171110_113359.mp4"></video>
                                            </li>
                                            <li>分析报告在指定目录下（Windows下为“C:\cfgPresureMonitor\[时间戳]”）保存</li>
                                            <li><img src="./assets/screen/11.png" /></li>
                                        </ul>
                                        <ul>
                                            <p>3D显示（实验）</p>
                                            <li>双击画面左下角版权标识区域显示垫上感应矩阵的3D画面，每个球体表示一个感应点，可拖放旋转，在3D画面上双击可以退出3D画面（对硬件要求高）</li>
                                            <li><img src="./assets/screen/12.png" /></li>
                                            <li><img src="./assets/screen/13.png" /></li>
                                        </ul>
                                    </section>
                                </div>
                                <div class="page" id="page-build">
                                    <section>
                                        <h2>构建方法</h2>
                                        <p>在Windows/Linux下重构Node串口读写模块serialport并关联node-webkit(nw 版本0.21.3为例)</p>
                                        <ul>
                                            <li>确保重构依赖库（VS，SDK，GCC等）正常安装并可以编译成功</li>
                                            <li>确保&nbsp;npm&nbsp;安装并正常运行</li>
                                            <li>安装端口读写库 npm install serialport</li>
                                            <li>npm install node-gyp -g</li>
                                            <li>npm install nw-gyp -g</li>
                                            <li>npm install node-pre-gyp -g</li>
                                            <li>定位到端口库中 cd node_modules\serialport</li>
                                            <li>执行 node-pre-gyp configure --runtime=node-webkit --target=0.21.3</li>
                                            <li>执行 node-pre-gyp build --runtime=node-webkit --target=0.21.3</li>
                                            <li>在 node_modules\serialport\build\Release中查看是否已经生成一个node-webkit-v0.21.3-win32-x64文件夹</li>
                                            <li>删除 serialport\node_modules 文件夹下 node-pre-gyp-github</li>
                                        </ul>
                                        <p>在Windows下打包可执行程序</p>
                                        <ul>
                                            <li>压缩系统源代码presureMonitor.zip放到&nbsp;node-webkit&nbsp;运行环境中</li>
                                            <li>定位到&nbsp;node-webkit&nbsp;运行环境下</li>
                                            <li>执行 copy /b nw.exe+presureMonitor.zip presureMonitor.exe</li>
                                            <li>使用ResourceHacker替换presureMonitor.exe默认图标</li>
                                            <li>使用&nbsp;Enigma&nbsp;Virtual&nbsp;Box&nbsp;软件打包presureMonitor.exe程序追加&nbsp;node-webkit&nbsp;运行环境下所有相关文件</li>
                                            <li>复制&nbsp;node-webkit&nbsp;运行环境下locales与exe文件平级</li>
                                        </ul>
                                        <p>使用&nbsp;node-webkit&nbsp;的SDK环境可以调用Chromium控制台调试程序</p>
                                        <p>Windows调试用自动打包运行批处理（以7-zip打包为例）</p>
                                        <ul>
                                            <li>D:\7-Zip\7z.exe a -tzip D:\nwjs-sdk-v0.22.3-win-x64\presureMonitor.zip "E:\Work\svn\PressureMonitoringSystem\trunk\nextCommonSrc\*" -xr!.svn</li>
                                            <li>D:\nwjs-sdk-v0.22.3-win-x64\nw.exe D:\nwjs-sdk-v0.22.3-win-x64\presureMonitor.zip</li>
                                        </ul>
                                    </section>
                                </div>
                                <div class="page" id="page-code-list">
                                    <section>
                                        <h2>文件列表</h2>
                                        <p>源代码</p>
                                        <ul>
                                            <li>asset&nbsp;-&nbsp;资源文件
                                                <ul>
                                                    <li>audio&nbsp;-&nbsp;音效资源
                                                        <ul>
                                                            <li>alert.ogg&nbsp;-&nbsp;警报音效</li>
                                                        </ul>
                                                    </li>
                                                    <li>images&nbsp;-&nbsp;图像资源
                                                        <ul>
                                                            <li>alarm.png</li>
                                                            <li>cushion.png</li>
                                                            <li>default.png</li>
                                                            <li>disconnect.png</li>
                                                            <li>head.png</li>
                                                            <li>heatmap.png</li>
                                                            <li>logo.png</li>
                                                            <li>offline.png</li>
                                                            <li>online.png</li>
                                                            <li>records.png</li>
                                                            <li>scale.png</li>
                                                            <li>set.png</li>
                                                            <li>sheet.png</li>
                                                        </ul>
                                                    </li>
                                                    <li>json&nbsp;-&nbsp;json文件
                                                        <ul>
                                                            <li>defaultscale.json</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li>css&nbsp;-&nbsp;层叠样式表
                                                <ul>
                                                    <li>main.css</li>
                                                </ul>
                                            </li>
                                            <li>js&nbsp;-&nbsp;ECMAScript文件
                                                <ul>
                                                    <li>classes&nbsp;-&nbsp;类
                                                        <ul>
                                                            <li>algorithmsLogic.class.js</li>
                                                            <li>behavior.class.js</li>
                                                            <li>callback.class.js</li>
                                                            <li>commonFunc.class.js</li>
                                                            <li>countdown.class.js</li>
                                                            <li>eventListener.class.js</li>
                                                            <li>heatmapWrapper.class.js</li>
                                                            <li>interface.class.js</li>
                                                            <li>io.class.js</li>
                                                            <li>pagebuilder.class.js</li>
                                                            <li>runtimeCollection.class.js</li>
                                                            <li>scaleAnalysisWrapper.class.js</li>
                                                            <li>serialport.class.js</li>
                                                            <li>sharingDataSet.class.js</li>
                                                            <li>threeWrapper.class.js</li>
                                                        </ul>
                                                    </li>
                                                    <li>workers&nbsp;-&nbsp;线程
                                                        <ul>
                                                            <li>bufferData.worker.js</li>
                                                            <li>dataAnalysis.worker.js</li>
                                                            <li>edgeDetection.worker.js</li>
                                                            <li>recoverAnalysis.worker.js</li>
                                                            <li>skeletonExtraction.worker.js</li>
                                                            <li>stepCollection.worker.js</li>
                                                        </ul>
                                                    </li>
                                                    <li>main.js</li>
                                                    <li>prototype.js</li>
                                                </ul>
                                            </li>
                                            <li>node_modules&nbsp;-&nbsp;Node模块</li>
                                            <li>vender&nbsp;-&nbsp;引用开源文件
                                                <ul>
                                                    <li>font-awesome-3.2.1&nbsp;-&nbsp;font-awesome</li>
                                                    <li>heatmap.min.js</li>
                                                    <li>jquery.min.js</li>
                                                    <li>three.min.js</li>
                                                </ul>
                                            </li>
                                            <li>index.html&nbsp;-&nbsp;入口</li>
                                            <li>LICENSE&nbsp;-&nbsp;软件遵循MIT开源许可</li>
                                            <li>package.json&nbsp;-&nbsp;node-webkit配置文件</li>
                                        </ul>
                                        <p>配置文件(C:\cfgPresureMonitor)</p>
                                        <ul>
                                            <li>[timestamp时间节点]&nbsp;-&nbsp;步态分析记录</li>
                                            <li>config.json&nbsp;-&nbsp;生成的默认配置记录</li>
                                            <li>[XXXX].scale&nbsp;-&nbsp;格式化的压力性溃疡评估表</li>
                                        </ul>
                                    </section>
                                </div>
                                <div class="page" id="page-classes">
                                    <section class="ac-container">
                                        <h2>对象方法</h2>
                                        <div>
                                            <input id="ac-algorth" name="accordion" type="checkbox" />
                                            <label for="ac-algorth">算法&nbsp;algorithmsLogic&nbsp;--&nbsp;algorithmsLogic.class.js</label>
                                            <article>
                                                <p>属性</p>
                                                <ul>
                                                    <li>skeletonExtractionWorker:&nbsp;图像细化线程对象</li>
                                                    <li>stepCollectionWorker:&nbsp;步态数据收集线程对象</li>
                                                </ul>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>_drawArrow_:&nbsp;在canvas中绘制行径方向
                                                        <ul>
                                                            <li>ctx:&nbsp;canvas控制环境句柄</li>
                                                            <li>cavList:&nbsp;采样的canvas集</li>
                                                            <li>width:&nbsp;canvas宽度</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getAnalysisReport_:&nbsp;获取分析报告
                                                        <ul>
                                                            <li>playground:&nbsp;报告绘制canvas</li>
                                                            <li>pathRange:&nbsp;行径范围</li>
                                                            <li>minMiddleLine:&nbsp;上边中界线</li>
                                                            <li>maxMiddleLine:&nbsp;下边中界线</li>
                                                            <li>stepSkeletonFlg:&nbsp;步态分析结果数据集</li>
                                                            <li>minXPoint:&nbsp;分析首步标识</li>
                                                            <li>maxXPoint:&nbsp;分析终步标识</li>
                                                            <li>toRight:&nbsp;行径方向</li>
                                                        </ul>
                                                    </li>
                                                    <li>_showBinaryImage:&nbsp;转化并显示行径二值图
                                                        <ul>
                                                            <li>cavList:&nbsp;采样的canvas集</li>
                                                            <li>playground:&nbsp;绘制canvas</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getWalkingPath:&nbsp;获取行径
                                                        <ul>
                                                            <li>playground:&nbsp;绘制canvas</li>
                                                            <li>cavList:&nbsp;采样的canvas集</li>
                                                        </ul>
                                                    </li>
                                                    <li>_skeletonExtractionWorkerCallback_:&nbsp;细化行径线程回调
                                                        <ul>
                                                            <li>event:&nbsp;回调数据</li>
                                                        </ul>
                                                    </li>
                                                    <li>_stepCollectionWorkerCallback_:&nbsp;步态数据收集线程回调
                                                        <ul>
                                                            <li>event:&nbsp;回调数据</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>_resetAndReportCollection:&nbsp;启动算法进行步态分析
                                                        <ul>
                                                            <li>needSave:&nbsp;是否需要持久化原始数据</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                                <p></p>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-behavior" name="accordion" type="checkbox" />
                                            <label for="ac-behavior">行为&nbsp;behavior&nbsp;--&nbsp;behavior.class.js</label>
                                            <article>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>calibrateData:&nbsp;校准数据矩阵
                                                        <ul>
                                                            <li>innerData:&nbsp;校准值矩阵</li>
                                                        </ul>
                                                    </li>
                                                    <li>getBaseVariance:&nbsp;获取基准判定方差
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>startCountDown:&nbsp;启动报警倒计时
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>countPlus:&nbsp;(离开，回归，翻转)计数值增加
                                                        <ul>
                                                            <li>type:&nbsp;计数对象</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>_getActiveInnerData:&nbsp;获取最后一次构建的矩阵数据
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_autoCalibration:&nbsp;自动校准
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_forceCalibrationData:&nbsp;强制校准
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_recordGait:&nbsp;步态采样记录收集
                                                        <ul>
                                                            <li>pointsLength:&nbsp;感应压力点数量</li>
                                                        </ul>
                                                    </li>
                                                    <li>_playRecord:&nbsp;步态分析回放递归
                                                        <ul>
                                                            <li>cavList:&nbsp;步态采样数据集</li>
                                                            <li>idx:&nbsp;采样数据集下标</li>
                                                            <li>playground:&nbsp;绘制canvas</li>
                                                        </ul>
                                                    </li>
                                                    <li>_saveConfig:&nbsp;保存配置数据
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_startCountDown:&nbsp;启动报警倒计时
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_countPlus:&nbsp;(离开，回归，翻转)计数值增加
                                                        <ul>
                                                            <li>type:&nbsp;计数对象</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-callback" name="accordion" type="checkbox" />
                                            <label for="ac-callback">Node串口连接回调&nbsp;callBackList&nbsp;--&nbsp;callback.class.js</label>
                                            <article>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>-</li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>callPortHandle:&nbsp;检索串口控制
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>normalErrHandle:&nbsp;基础错误控制
                                                        <ul>
                                                            <li>err:&nbsp;错误对象</li>
                                                            <li>initiator:&nbsp;错误源</li>
                                                        </ul>
                                                    </li>
                                                    <li>sericalPortOpened:&nbsp;串口开启回调
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>sericalPortDataWrapper:&nbsp;串口数据输入回调
                                                        <ul>
                                                            <li>strInnerData:&nbsp;串口输入数据</li>
                                                        </ul>
                                                    </li>
                                                    <li>sericalPortDisConnected:&nbsp;串口断开回调
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>sericalPortClosed:&nbsp;串口关闭回调
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>sericalPortError:&nbsp;串口错误回调
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-commonfunc" name="accordion" type="checkbox" />
                                            <label for="ac-commonfunc">共通函数&nbsp;commonFunc&nbsp;--&nbsp;commonFunc.class.js</label>
                                            <article>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>-</li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>_mergeObject:&nbsp;合并对象
                                                        <ul>
                                                            <li>&infin;:&nbsp;合并源数据</li>
                                                        </ul>
                                                    </li>
                                                    <li>_isArray:&nbsp;判定对象是否是数组
                                                        <ul>
                                                            <li>obj:&nbsp;判定对象</li>
                                                        </ul>
                                                    </li>
                                                    <li>_chkEqual:&nbsp;判定对象是否内容相等(toString)
                                                        <ul>
                                                            <li>a:&nbsp;比较对象</li>
                                                            <li>b:&nbsp;比较对象</li>
                                                        </ul>
                                                    </li>
                                                    <li>_toInt:&nbsp;安全转化为整型
                                                        <ul>
                                                            <li>data:&nbsp;源对象</li>
                                                        </ul>
                                                    </li>
                                                    <li>_toFloat:&nbsp;安全转化为浮点型
                                                        <ul>
                                                            <li>data:&nbsp;源对象</li>
                                                        </ul>
                                                    </li>
                                                    <li>_hex2char:&nbsp;16进制值转化为ASCII字符
                                                        <ul>
                                                            <li>data:&nbsp;源对象</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getHypotenuse:&nbsp;勾股定理获取斜边长度
                                                        <ul>
                                                            <li>edgeA:&nbsp;直角边</li>
                                                            <li>edgeB:&nbsp;直角边</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-countdown" name="accordion" type="checkbox" />
                                            <label for="ac-countdown">倒计时&nbsp;countDown&nbsp;--&nbsp;countdown.class.js</label>
                                            <article>
                                                <p>属性</p>
                                                <ul>
                                                    <li>hours:&nbsp;小时标识</li>
                                                    <li>minutes:&nbsp;分钟标识</li>
                                                    <li>options:&nbsp;启动参数</li>
                                                    <li>lockTick:&nbsp;计时器句柄</li>
                                                </ul>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>pandLeft:&nbsp;补0到2位
                                                        <ul>
                                                            <li>value:&nbsp;数据值</li>
                                                        </ul>
                                                    </li>
                                                    <li>tick:&nbsp;计时回调
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>_countDown:&nbsp;启动倒计时
                                                        <ul>
                                                            <li>prop:&nbsp;启动参数
                                                                <br/>&nbsp;&nbsp;callback:回调函数
                                                                <br/>&nbsp;&nbsp;timestamp:时间</li>
                                                        </ul>
                                                    </li>
                                                    <li>_reset:&nbsp;重置倒计时
                                                        <ul>
                                                            <li>prop:&nbsp;重置时间</li>
                                                        </ul>
                                                    </li>
                                                    <li>_stop:&nbsp;暂停计时
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_start:&nbsp;恢复计时
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_stoped:&nbsp;判断计时是否停止
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_setFinished:&nbsp;计时器归零
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getRestTimestamp:&nbsp;获取剩余时间
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-eventlistener" name="accordion" type="checkbox" />
                                            <label for="ac-eventlistener">事件响应&nbsp;eventListener&nbsp;--&nbsp;eventListener.class.js</label>
                                            <article>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>-</li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>_hideMainPopup:&nbsp;隐藏步态分析结果弹出框
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_setActivePage:&nbsp;主画面显示切换
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_controlGait:&nbsp;步态分析开始/结束
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_replayGait:&nbsp;步态分析回放
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_showRecord:&nbsp;显示步态分析记录
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_changeNoiseLimit:&nbsp;噪点限制设置
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_changeAlarmFrequency:&nbsp;警报频度设置
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_changeAlarmKeepTime:&nbsp;警报时长设置
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_changeScaleTable:&nbsp;修改运行时压疮评估表
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_changeScale:&nbsp;修改压疮评估表选择
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-heatmap" name="accordion" type="checkbox" />
                                            <label for="ac-heatmap">压力图封装&nbsp;heatmapWrapper&nbsp;--&nbsp;heatmapWrapper.class.js</label>
                                            <article>
                                                <p>属性</p>
                                                <ul>
                                                    <li>__heatmapInstance__:&nbsp;压力图控件句柄</li>
                                                    <li>__defaultConfig__:&nbsp;压力图默认配置参数</li>
                                                    <li>__defaultGradientRange__:&nbsp;压力图默认颜色显示定义</li>
                                                    <li>__activedGradientRange__:&nbsp;运行时压力图颜色显示定义</li>
                                                </ul>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>getBinaryImage:&nbsp;获取二值图数据矩阵
                                                        <ul>
                                                            <li>imgData:&nbsp;图像数据流</li>
                                                            <li>width:&nbsp;矩阵宽度</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>_init:&nbsp;初始化压力图
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getGradientRange:&nbsp;获取压力图默认颜色显示定义
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getActivedGradientRange:&nbsp;获取运行时压力图颜色显示定义
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_setHeatmap:&nbsp;显示压力图
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-interface" name="accordion" type="checkbox" />
                                            <label for="ac-interface">接口&nbsp;interFace&nbsp;--&nbsp;interface.class.js</label>
                                            <article>
                                                <p>属性</p>
                                                <ul>
                                                    <li>insideObject:&nbsp;内部用标识</li>
                                                </ul>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>-</li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>_isInsideForm:&nbsp;判定程序是否处于node-webkit环境中(是否由Node提供外部数据)
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_initHeatmap:&nbsp;由外部数据初始化压力图
                                                        <ul>
                                                            <li>strJson:&nbsp;压力图初始参数(有x-串口数据[0],y-串口数据[1]两个属性的JSON字符串)</li>
                                                        </ul>
                                                    </li>
                                                    <li>_setAndRefreshData:&nbsp;由外部数据矩阵显示压力图
                                                        <ul>
                                                            <li>strJson:&nbsp;格式化后的串口数据矩阵</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-io" name="accordion" type="checkbox" />
                                            <label for="ac-io">Node文件系统操作&nbsp;io&nbsp;--&nbsp;io.class.js</label>
                                            <article>
                                                <p>属性</p>
                                                <ul>
                                                    <li>__commonConstant__:&nbsp;默认配置常量</li>
                                                    <li>__nodeFs__:&nbsp;Node fs模块句柄</li>
                                                    <li>__nodePath__:&nbsp;Node path模块句柄</li>
                                                </ul>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>_readFile:&nbsp;读取文件
                                                        <ul>
                                                            <li>uri:&nbsp;文件路径</li>
                                                            <li>encode:&nbsp;文件编码格式</li>
                                                            <li>type:&nbsp;文件类型</li>
                                                        </ul>
                                                    </li>
                                                    <li>_saveFile:&nbsp;保存文件
                                                        <ul>
                                                            <li>uri:&nbsp;文件保存路径</li>
                                                            <li>bufferData:&nbsp;文件数据流</li>
                                                            <li>sync:&nbsp;是否同步保存</li>
                                                        </ul>
                                                    </li>
                                                    <li>_makeDir:&nbsp;创建文件夹
                                                        <ul>
                                                            <li>uri:&nbsp;文件夹路径</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getDefaultScale:&nbsp;获取默认评估表数据
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>_saveGaitRecord:&nbsp;保存步态分析记录
                                                        <ul>
                                                            <li>recordCollection:&nbsp;步态分析记录</li>
                                                        </ul>
                                                    </li>
                                                    <li>_findHistroies:&nbsp;读取步态分析记录集
                                                        <ul>
                                                            <li>forceDir:&nbsp;是否要求只判定文件夹</li>
                                                            <li>path:&nbsp;根目录路径</li>
                                                        </ul>
                                                    </li>
                                                    <li>_saveReportOverview:&nbsp;保存步态分析报告摘要
                                                        <ul>
                                                            <li>analysisReport:&nbsp;步态分析报告</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getReportOverview:&nbsp;获取步态分析报告摘要
                                                        <ul>
                                                            <li>uri:&nbsp;步态分析报告摘要文件路径</li>
                                                        </ul>
                                                    </li>
                                                    <li>_saveConfigData:&nbsp;保存配置数据
                                                        <ul>
                                                            <li>bufferData:&nbsp;配置数据流</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getConfigData:&nbsp;获取配置数据
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getScaleList:&nbsp;获取支持的评估表列表
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getAScale:&nbsp;获取选定的评估表
                                                        <ul>
                                                            <li>table:&nbsp;评估表名</li>
                                                        </ul>
                                                    </li>
                                                    <li>_saveScaleTable:&nbsp;保存评估表
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-pagebuilder" name="accordion" type="checkbox" />
                                            <label for="ac-pagebuilder">画面构造&nbsp;pageBuilder&nbsp;--&nbsp;pagebuilder.class.js</label>
                                            <article>
                                                <p>属性</p>
                                                <ul>
                                                    <li>pageCoordinator:&nbsp;页面协调控制对象</li>
                                                </ul>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>traverseClearEvent:&nbsp;递归消除元素绑定的事件
                                                        <ul>
                                                            <li>childrens:&nbsp;目标元素</li>
                                                        </ul>
                                                    </li>
                                                    <li>clearContainer:&nbsp;清除页面(导航，主页面)
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>makeCushion:&nbsp;构建16x16导航
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>makeSheet:&nbsp;构建32x80导航
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>createGrid:&nbsp;构建压力图网格
                                                        <ul>
                                                            <li>heatmapContainer:&nbsp;压力图容器</li>
                                                        </ul>
                                                    </li>
                                                    <li>createSymbol:&nbsp;构建图例
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>formatReport:&nbsp;构建步态分析报表
                                                        <ul>
                                                            <li>analysisReport:&nbsp;步态分析报告</li>
                                                            <li>keepTimes:&nbsp;记录持续时间</li>
                                                        </ul>
                                                    </li>
                                                    <li>getDynamicTable:&nbsp;动态构建评估表
                                                        <ul>
                                                            <li>scaleTable:&nbsp;评估表名</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>_init:&nbsp;初始化对象
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_toWait:&nbsp;未连接画面
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_toProduct:&nbsp;产品画面引导
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_clearContentBody:&nbsp;清除主画面
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_setHeatmapContent:&nbsp;构建压力图容器
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_popupGaitContainer:&nbsp;弹出步态分析报告
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_resizePopupCanvas:&nbsp;重设弹出报告内的canvas大小
                                                        <ul>
                                                            <li>width:&nbsp;宽</li>
                                                            <li>height:&nbsp;高</li>
                                                        </ul>
                                                    </li>
                                                    <li>_appendPopupReport:&nbsp;连接步态分析报表
                                                        <ul>
                                                            <li>analysisReport:&nbsp;步态分析报告</li>
                                                            <li>keepTimes:&nbsp;记录持续时间</li>
                                                        </ul>
                                                    </li>
                                                    <li>_removePopupReport:&nbsp;移除步态分析报表
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_setRecordsContent:&nbsp;构建历史记录画面
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_setSetContent:&nbsp;构建设置画面
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_setScaleContent:&nbsp;构建评估表选择画面
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_setDynamicTable:&nbsp;动态构建评估表
                                                        <ul>
                                                            <li>scaleTable:&nbsp;评估表名</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-runtimecollection" name="accordion" type="checkbox" />
                                            <label for="ac-runtimecollection">运行时数据集&nbsp;runtimeCollection&nbsp;--&nbsp;runtimeCollection.class.js</label>
                                            <article>
                                                <p>属性</p>
                                                <ul>
                                                    <li>collection:&nbsp;运行时数据集对象</li>
                                                </ul>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>-</li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>_set:&nbsp;设置属性
                                                        <ul>
                                                            <li>key:&nbsp;属性键</li>
                                                            <li>data:&nbsp;属性值</li>
                                                        </ul>
                                                    </li>
                                                    <li>_get:&nbsp;获取属性
                                                        <ul>
                                                            <li>key:&nbsp;属性键</li>
                                                        </ul>
                                                    </li>
                                                    <li>_push:&nbsp;对数组属性进行压栈
                                                        <ul>
                                                            <li>key:&nbsp;属性键</li>
                                                            <li>data:&nbsp;压入值</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-scale" name="accordion" type="checkbox" />
                                            <label for="ac-scale">评估分析封装&nbsp;scaleAnalysisWrapper&nbsp;--&nbsp;scaleAnalysisWrapper.class.js</label>
                                            <article>
                                                <p>属性</p>
                                                <ul>
                                                    <li>dataAnalysisWorker:&nbsp;评估分析线程对象</li>
                                                    <li>recoverAnalysisWorker:&nbsp;重启倒计时判定线程对象</li>
                                                    <li>edgeDetectionWorker:&nbsp;图像边缘检测线程对象</li>
                                                    <li>skeletonExtractionWorker:&nbsp;图像细化线程对象</li>
                                                </ul>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>getBinaryImage:&nbsp;获取图像二值图
                                                        <ul>
                                                            <li>target:&nbsp;图像canvas元素</li>
                                                        </ul>
                                                    </li>
                                                    <li>doAlert:&nbsp;执行警报
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>setCountDownZero:&nbsp;倒计时归零
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_dataAnalysisWorkerCallback_:&nbsp;评估分析 线程回调
                                                        <ul>
                                                            <li>event:&nbsp;回调数据</li>
                                                        </ul>
                                                    </li>
                                                    <li>_edgeDetectionWorkerCallback_:&nbsp;图像边缘检测线程回调
                                                        <ul>
                                                            <li>event:&nbsp;回调数据</li>
                                                        </ul>
                                                    </li>
                                                    <li>_skeletonExtractionWorkerCallback_:&nbsp;图像细化线程回调
                                                        <ul>
                                                            <li>event:&nbsp;回调数据</li>
                                                        </ul>
                                                    </li>
                                                    <li>_recoverAnalysisWorkerCallback_:&nbsp;重启倒计时判定线程回调
                                                        <ul>
                                                            <li>event:&nbsp;回调数据</li>
                                                        </ul>
                                                    </li>
                                                    <li>recalcScale:&nbsp;重新计算评估评分
                                                        <ul>
                                                            <li>cd:&nbsp;剩余倒计时时间</li>
                                                        </ul>
                                                    </li>
                                                    <li>recoverSender:&nbsp;发起重启倒计时判定线程
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>_getCountDownCallBack:&nbsp;倒计时回调
                                                        <ul>
                                                            <li>hours:&nbsp;时</li>
                                                            <li>minutes:&nbsp;分</li>
                                                            <li>seconds:&nbsp;秒</li>
                                                            <li>cd:&nbsp;剩余时间</li>
                                                        </ul>
                                                    </li>
                                                    <li>_postEdgeDetectionData:&nbsp;调用图像边缘检测线程
                                                        <ul>
                                                            <li>data:&nbsp;线程参数</li>
                                                        </ul>
                                                    </li>
                                                    <li>_postSkeletonExtractionData:&nbsp;调用图像细化线程
                                                        <ul>
                                                            <li>data:&nbsp;线程参数</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-serialport" name="accordion" type="checkbox" />
                                            <label for="ac-serialport">Node串口连接&nbsp;nodeSerialport&nbsp;--&nbsp;serialport.class.js</label>
                                            <article>
                                                <p>属性</p>
                                                <ul>
                                                    <li>Serialport:&nbsp;node串口连接闭包对象</li>
                                                    <li>__innerData__:&nbsp;格式化的串口数据矩阵</li>
                                                    <li>__defaultConfig__:&nbsp;串口连接默认配置对象</li>
                                                    <li>__portList__:&nbsp;设备串口列表</li>
                                                    <li>dataWrapperWorker:&nbsp;串行数据组合矩阵线程对象</li>
                                                </ul>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>-</li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>_init:&nbsp;初始化串口连接对象
                                                        <ul>
                                                            <li>config:&nbsp;串口连接配置</li>
                                                        </ul>
                                                    </li>
                                                    <li>_findPort:&nbsp;检索实际设备连接端口
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getInnerData:&nbsp;获取最新的串口数据矩阵
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-sharingdata" name="accordion" type="checkbox" />
                                            <label for="ac-sharingdata">共享数据集&nbsp;sharingDataSet&nbsp;--&nbsp;sharingDataSet.class.js</label>
                                            <article>
                                                <p>属性</p>
                                                <ul>
                                                    <li>privateDataSet:&nbsp;共享数据集对象</li>
                                                </ul>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>-</li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>_set:&nbsp;设置属性
                                                        <ul>
                                                            <li>key:&nbsp;属性键</li>
                                                            <li>value:&nbsp;属性值</li>
                                                        </ul>
                                                    </li>
                                                    <li>_get:&nbsp;获取属性
                                                        <ul>
                                                            <li>key:&nbsp;属性键</li>
                                                        </ul>
                                                    </li>
                                                    <li>_delete:&nbsp;删除属性
                                                        <ul>
                                                            <li>key:&nbsp;属性键</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getMap:&nbsp;获取共享数据集
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_resetDataSet:&nbsp;重置共享数据集
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getProductType:&nbsp;获取连接设备类型(1:16x16;2:32x80)
                                                        <ul>
                                                            <li>arguments[0]:&nbsp;连接设备矩阵大小</li>
                                                        </ul>
                                                    </li>
                                                    <li>_getConfigData:&nbsp;获取定式配置
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_setConfigData:&nbsp;读取配置文件设置定式配置
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                    <li>_setScaleList:&nbsp;读取并设置评估列表
                                                        <ul>
                                                            <li>-</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-three" name="accordion" type="checkbox" />
                                            <label for="ac-three">3D图像处理封装&nbsp;threeWrapper&nbsp;--&nbsp;threeWrapper.class.js</label>
                                            <article>
                                                <p>属性</p>
                                                <ul>
                                                    <li>inited:&nbsp;初始化判定标识</li>
                                                    <li>camera:&nbsp;远景摄像机</li>
                                                    <li>scene:&nbsp;场景</li>
                                                    <li>renderer:&nbsp;渲染器</li>
                                                    <li>mouseStartPoint:&nbsp;鼠标按下起始点</li>
                                                    <li>yOffset:&nbsp;场景y轴(深度)偏移量</li>
                                                    <li>objectMatrix:&nbsp;模型矩阵存储</li>
                                                    <li>activedGradientRange:&nbsp;压力图图例显示色阶</li>
                                                    <li>geometry:&nbsp;几何模型实例</li>
                                                </ul>
                                                <p>private方法</p>
                                                <ul>
                                                    <li>-</li>
                                                </ul>
                                                <p>public方法</p>
                                                <ul>
                                                    <li>_getRender:&nbsp;获取渲染内容对象
                                                        <ul>
                                                            <li>width:&nbsp;渲染宽度</li>
                                                            <li>height:&nbsp;渲染高度</li>
                                                        </ul>
                                                    </li>
                                                    <li>_render:&nbsp;执行3D渲染
                                                        <ul>
                                                            <li>matrix:&nbsp;串口数据矩阵</li>
                                                            <li>calibrationMatrix:&nbsp;校准数据矩阵</li>
                                                            <li>radius:&nbsp;压力图数据点扩展半径</li>
                                                        </ul>
                                                    </li>
                                                    <li>_startMove:&nbsp;场景内鼠标压下事件响应
                                                        <ul>
                                                            <li>event:&nbsp;事件对象</li>
                                                        </ul>
                                                    </li>
                                                    <li>_endMove:&nbsp;场景内鼠标放开事件响应
                                                        <ul>
                                                            <li>event:&nbsp;事件对象</li>
                                                        </ul>
                                                    </li>
                                                    <li>_moveCamera:&nbsp;场景内鼠标移动(移动摄像机)事件响应
                                                        <ul>
                                                            <li>event:&nbsp;事件对象</li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </article>
                                        </div>
                                    </section>
                                </div>
                                <div class="page" id="page-worker">
                                    <section class="ac-container">
                                        <h2>线程</h2>
                                        <p>程序利用HTML5的WebWorker调用附加线程进行时间复杂度高的数学计算</p>
                                        <div>
                                            <input id="ac-buff-worker" name="accordion2" type="checkbox" />
                                            <label for="ac-buff-worker">串行数据组合矩阵&nbsp;--&nbsp;bufferData.worker.js</label>
                                            <article>
                                                <p>串口以(A...A[x] [y] [number]A...A)的格式传递数据，数据以ASCII字符码形式输入，该线程接收串行数据并组合成矩阵，由nodeSerialport主调</p>
                                                <ul>输入
                                                    <li>innerData&nbsp;--&nbsp;程序维护的内部矩阵</li>
                                                    <li>data&nbsp;--&nbsp;串行数据</li>
                                                </ul>
                                                <ul>变量
                                                    <li>maxSize&nbsp;--&nbsp;保存x,y的最大值及相关控制map</li>
                                                    <li>splitPoint&nbsp;--&nbsp;矩阵幅完成标识</li>
                                                    <li>innerData&nbsp;--&nbsp;数据矩阵</li>
                                                    <li>callbackFlg&nbsp;--&nbsp;线程回调标识</li>
                                                </ul>
                                                <ul>方法
                                                    <li>combineNumData&nbsp;--&nbsp;根据字符数组长度使用ASCII码&rarr;数字转换</li>
                                                    <li>_formatABufferData&nbsp;--&nbsp;解析得到矩阵内一个点的数据</li>
                                                </ul>
                                                <ul>输出
                                                    <li>size
                                                        <ul>
                                                            <li>x&nbsp;--&nbsp;x最大值</li>
                                                            <li>y&nbsp;--&nbsp;y最大值</li>
                                                        </ul>
                                                    </li>
                                                    <li>data&nbsp;--&nbsp;一幅矩阵</li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-data-worker" name="accordion2" type="checkbox" />
                                            <label for="ac-data-worker">压力性溃疡动态评估&nbsp;--&nbsp;dataAnalysis.worker.js</label>
                                            <article>
                                                <p>根据压力性溃疡评估表结合数据矩阵，图像边缘数据、骨架数据动态计算评估分数并判定翻身/离开并调整倒计时，由scaleAnalysisWrapper主调</p>
                                                <ul>输入
                                                    <li>calibrationData&nbsp;--&nbsp;校准矩阵</li>
                                                    <li>innerData&nbsp;--&nbsp;数据矩阵</li>
                                                    <li>baseScale&nbsp;--&nbsp;压力评分除外的特征项评估分值</li>
                                                    <li>presureRanges&nbsp;--&nbsp;压力分值的分段数</li>
                                                    <li>threshold&nbsp;--&nbsp;评估临界值范围</li>
                                                    <li>cd&nbsp;--&nbsp;当前倒计时</li>
                                                    <li>edgeList&nbsp;--&nbsp;图像边缘数据</li>
                                                    <li>skeletonList&nbsp;--&nbsp;图像骨架数据</li>
                                                </ul>
                                                <ul>变量
                                                    <li>delayScaleList&nbsp;--&nbsp;评分延迟</li>
                                                    <li>preInnerData&nbsp;--&nbsp;前回矩阵</li>
                                                    <li>preEdgeData&nbsp;--&nbsp;前回图像边缘数据</li>
                                                    <li>preSkeletonData&nbsp;--&nbsp;前回图像骨架数据</li>
                                                </ul>
                                                <ul>输出
                                                    <li>cd&nbsp;--&nbsp;倒计时</li>
                                                    <li>data&nbsp;--&nbsp;评估分</li>
                                                    <li>middData&nbsp;--&nbsp;中间数据（未使用）</li>
                                                    <li>leave&nbsp;--&nbsp;离开标识</li>
                                                    <li>forceback&nbsp;--&nbsp;翻转标识</li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-edge-worker" name="accordion2" type="checkbox" />
                                            <label for="ac-edge-worker">图像边缘检测&nbsp;--&nbsp;edgeDetection.worker.js</label>
                                            <article>
                                                <p>使用索贝尔算子对二值图矩阵卷积得到图像边缘</p>
                                                <ul>输入
                                                    <li>imgData&nbsp;--&nbsp;二值图矩阵</li>
                                                    <li>filterTimes&nbsp;--&nbsp;图像模糊次数（未使用）</li>
                                                </ul>
                                                <ul>方法
                                                    <li>_medianFilter&nbsp;--&nbsp;图像模糊（一次）</li>
                                                    <li>_sobelConvolution&nbsp;--&nbsp;索贝尔卷积并行列转换（数据矩阵&rarr;图像矩阵）</li>
                                                </ul>
                                                <ul>输出
                                                    <li>边缘图像矩阵</li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-recover-worker" name="accordion2" type="checkbox" />
                                            <label for="ac-recover-worker">警报后动态计时恢复&nbsp;--&nbsp;recoverAnalysis.worker.js</label>
                                            <article>
                                                <p>简化的压力性溃疡动态评估逻辑，在倒计时结束，警报发生后启动，在翻转/离开等状态重启计时器，由scaleAnalysisWrapper主调</p>
                                                <ul>输入
                                                    <li>calibrationData&nbsp;--&nbsp;校准矩阵</li>
                                                    <li>innerData&nbsp;--&nbsp;数据矩阵</li>
                                                    <li>baseScale&nbsp;--&nbsp;压力评分除外的特征项评估分值</li>
                                                    <li>presureRanges&nbsp;--&nbsp;压力分值的分段数</li>
                                                    <li>threshold&nbsp;--&nbsp;评估临界值范围</li>
                                                    <li>cd&nbsp;--&nbsp;当前倒计时</li>
                                                    <li>edgeList&nbsp;--&nbsp;图像边缘数据</li>
                                                    <li>skeletonList&nbsp;--&nbsp;图像骨架数据</li>
                                                </ul>
                                                <ul>变量
                                                    <li>preInnerData&nbsp;--&nbsp;前回矩阵</li>
                                                    <li>preEdgeData&nbsp;--&nbsp;前回图像边缘数据</li>
                                                    <li>preSkeletonData&nbsp;--&nbsp;前回图像骨架数据</li>
                                                </ul>
                                                <ul>输出
                                                    <li>data&nbsp;--&nbsp;倒计时</li>
                                                    <li>leave&nbsp;--&nbsp;离开标识</li>
                                                    <li>forceback&nbsp;--&nbsp;翻转标识</li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-skeleton-worker" name="accordion2" type="checkbox" />
                                            <label for="ac-skeleton-worker">图像细化&nbsp;--&nbsp;skeletonExtraction.worker.js</label>
                                            <article>
                                                <p>使用Zhang-Suen细化算法细化二值图矩阵得到图像骨架</p>
                                                <ul>输入
                                                    <li>binaryImg&nbsp;--&nbsp;二值图矩阵</li>
                                                </ul>
                                                <ul>方法
                                                    <li>_thinImage&nbsp;--&nbsp;细化二值图矩阵</li>
                                                </ul>
                                                <ul>输出
                                                    <li>skeletonTimes&nbsp;--&nbsp;细化回数</li>
                                                    <li>skeleton&nbsp;--&nbsp;图像骨架矩阵</li>
                                                </ul>
                                            </article>
                                        </div>
                                        <div>
                                            <input id="ac-step-worker" name="accordion2" type="checkbox" />
                                            <label for="ac-step-worker">步态数据收集&nbsp;--&nbsp;stepCollection.worker.js</label>
                                            <article>
                                                <p>解析步态图像骨架矩阵，收集脚步信息，由algorithmsLogic主调</p>
                                                <ul>输入
                                                    <li>martixSkeletonImage&nbsp;--&nbsp;步态图像骨架矩阵</li>
                                                    <li>toRight&nbsp;--&nbsp;行径方向</li>
                                                    <li>pathRange&nbsp;--&nbsp;行径路径范围</li>
                                                </ul>
                                                <ul>方法
                                                    <li>getAround&nbsp;--&nbsp;获得附近八个点的信息</li>
                                                    <li>findEndpoints&nbsp;--&nbsp;发现骨架端点</li>
                                                    <li>getHypotenuse&nbsp;--&nbsp;勾股定理计算斜边</li>
                                                    <li>traceTrajectory&nbsp;--&nbsp;递归对步态图像骨架矩阵进行循迹</li>
                                                    <li>getTrajectory&nbsp;--&nbsp;递归主调</li>
                                                    <li>findTrajectory&nbsp;--&nbsp;对循迹结果配对最远距离端点</li>
                                                </ul>
                                                <ul>输出
                                                    <li>minPathRange&nbsp;--&nbsp;图像上半脚步信息（{x,y}点坐标数组，开始端点，结束端点交错）</li>
                                                    <li>maxPathRange&nbsp;--&nbsp;图像下半脚步信息（{x,y}点坐标数组，开始端点，结束端点交错）</li>
                                                </ul>
                                            </article>
                                        </div>
                                    </section>
                                </div>
                                <div class="page" id="page-algorth">
                                    <section class="algorth-main">
                                        <h2>算法/逻辑</h2>
                                        <p>流程</p>
                                        <ul>
                                            <li>软件启动</li>
                                            <li class="node-only">调用Node读取配置文件获得全局配置</li>
                                            <li class="node-only">调用Node读取配置文件获得有效的/默认内置评估表数据</li>
                                            <li>初始化程序画面/跳转到未连接画面</li>
                                            <li>启动倒计时</li>
                                            <li class="node-only">调用Node请求串口数据</li>
                                            <li>根据解析的串口数据矩阵响应内容</li>
                                            <li>关闭软件/配置变化/步态分析结束时存储数据</li>
                                            <li>&nbsp;</li>
                                            <li class="node-only">在不支持Node/node-webkit的环境下需要外部数据提供，支持Node/node-webkit的环境包括Windows/Linux/Mac OS X，具体支持环境以<a href="https://nwjs.io/">NWjs官方</a>支持为准</li>
                                        </ul>
                                        <p>实时评分的时机</p>
                                        <ul>
                                            <li>实时评分由每次倒计时的回调启动，即每秒计算一次</li>
                                            <li>由于评分变化造成影响较大，为防止部分例外数据造成全局影响，动态评估有采样分析，采样数为21，取采样众数为评分结果，所以实时评分有一定延迟</li>
                                            <li>下列情况下倒计时被自动重置
                                                <ul>
                                                    <li>当图像检测不到边缘时被判定为离开，倒计时停止，返回后重置</li>
                                                    <li>将图像细化骨架点与前回比较，在
                                                        <ul>
                                                            <li>有变化的点的数量大于30%</li>
                                                            <li>没有相同点</li>
                                                            <li>没有变化的点比重小于50%</li>
                                                        </ul>
                                                        时被判定为翻身，倒计时重置</li>
                                                    <li>自动校准程序判定为不可自动校准时被判定为返回倒计时重启</li>
                                                </ul>
                                            </li>
                                        </ul>
                                        <p>自动校准判定</p>
                                        <ul>
                                            <li>程序初次获取串口数据矩阵时获得校准矩阵</li>
                                            <li>自动校准由串口数据矩阵回调启动，延迟为21回</li>
                                            <li>除去强制自动校准的情况，计算校准矩阵和当前数据矩阵的方差</li>
                                            <li>方差临界值默认800，16x16为300，32x80为1500，按数据变化需求调整</li>
                                            <li>在临界值内则执行校准，将当前数据矩阵作为校准矩阵记录</li>
                                        </ul>
                                        <p>步态分析算法</p>
                                        <ul>
                                            <li>以画面有图像为准滤取有效采样矩阵，以有效采样矩阵为准获取实际采样时间</li>
                                            <li>叠加有效步态分析记录过程中的每一次采样矩阵，形成脚步图像</li>
                                            <li>将脚步图像转化为二值图</li>
                                            <li><span class="note">*</span>根据脚步二值图获取上/下半区路径范围</li>
                                            <li>根据采样数组的前四分位数组的图像位置比重确定步行方向</li>
                                            <li>对脚步二值图进行细化</li>
                                            <li>扫描细化图像，获取端点</li>
                                            <li><span class="note">**</span>对端点进行循迹，分别连接距离最长的两个端点</li>
                                            <li>综合采样时间，路径范围，步行方向，细化图像，脚步端点连线数据得到步态分析报告</li>
                                            <li>&nbsp;</li>
                                            <li><span class="note">*</span>需要步行方向与垫长边基本平行，同时两脚之间有一定步宽较为准确</li>
                                            <li><span class="note">**</span>两个脚印图像重叠会导致细化端点相连造成误判定</li>
                                        </ul>
                                        <p>可能的问题</p>
                                        <ul>
                                            <li>翻转判定的准确性</li>
                                            <li>自动校准方差临界值的准确性</li>
                                            <li>硬件数据的稳定性与可靠性</li>
                                            <li>其他</li>
                                        </ul>
                                    </section>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>